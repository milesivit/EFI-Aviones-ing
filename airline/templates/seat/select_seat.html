{% extends 'base.html' %}
{% block title %}Seleccionar Asiento{% endblock %}

{% block content %}
<div class="container my-4">

    <h2 class="text-center mb-4" style="color: #577399; font-weight: 700;">
        Select a seat for the flight {{ flight.id }}
    </h2>

    <form method="post" class="d-flex justify-content-center">
        {% csrf_token %}
        <div class="bg-light p-4 rounded shadow-sm" style="max-width: 600px;">

            {% for row in seat_matrix %}
                <div class="d-flex justify-content-center mb-2">
                    {% for seat in row %}
                        {% if seat %}
                            <button 
                                name="seat_id" 
                                value="{{ seat.id }}" 
                                type="submit"
                                class="btn btn-sm me-1"
                                style="
                                    width: 48px; 
                                    height: 48px; 
                                    font-weight: 600;
                                    border-radius: 8px;
                                    {% if seat.status == 'available' %}
                                        background-color: #4CAF50;
                                        color: white;
                                        cursor: pointer;
                                    {% elif seat.status == 'Taken' %}
                                        background-color: #F44336;
                                        color: white;
                                        cursor: not-allowed;
                                    {% else %}
                                        background-color: #B0BEC5;
                                        color: #37474F;
                                        cursor: not-allowed;
                                    {% endif %}
                                "
                                {% if seat.status != 'available' %} disabled {% endif %}
                                title="Asiento {{ seat.number }} - {{ seat.seat_type|title }}"
                            >
                                {{ seat.number }}
                            </button>
                        {% else %}
                            <div style="width: 48px; height: 48px; margin-right: 6px;"></div>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endfor %}

            <div class="mt-3 text-center">
                <small>
                    <span class="badge bg-success me-2">&nbsp;</span> Available
                    <span class="badge bg-danger ms-3 me-2">&nbsp;</span> Taken
                    <span class="badge bg-secondary ms-3 me-2">&nbsp;</span> Not assignable
                </small>
            </div>

        </div>
    </form>

    <div class="mt-4 text-center">
        <a href="{% url 'flight_list' %}" class="btn btn-outline-secondary">Return to flights</a>
    </div>
</div>
{% endblock %}
