{% extends 'base.html' %} 

{% block title %}Flights Availables{% endblock %}

{% block content %}
<div class="container my-4">
  <h1 class="mb-4" style="color: #577399; font-weight: 700;">Flights Availables</h1>

  <div class="row">
    {% for flight in flights %}
      <div class="col-md-6 mb-4">
        <div class="card shadow-sm" 
             style="border: 2px solid #cce0ff; border-radius: 12px; overflow: hidden; background-color: #f0f8ff;">
          
          <!-- Encabezado tipo ticket -->
          <div class="card-header text-white d-flex justify-content-between align-items-center" 
               style="background-color: #004080; font-weight: 600;">
            <span><i class="bi bi-airplane-fill"></i> Flight #{{ flight.id }}</span>
            <span><i class="bi bi-clock"></i> {{ flight.duration }}</span>
          </div>

          <!-- Cuerpo -->
          <div class="card-body">
            <div class="d-flex justify-content-between mb-3">
              <div>
                <p class="mb-1 text-muted" style="font-size: 0.9rem;">From</p>
                <h5 style="font-weight:700;"><i class="bi bi-geo-alt-fill"></i> {{ flight.origin }}</h5>
              </div>
              <div class="text-center align-self-center">
                <i class="bi bi-arrow-right" style="font-size: 1.5rem; color:#bb2525;"></i>
              </div>
              <div>
                <p class="mb-1 text-muted" style="font-size: 0.9rem;">To</p>
                <h5 style="font-weight:700;"><i class="bi bi-geo-alt-fill"></i> {{ flight.destination }}</h5>
              </div>
            </div>

            <hr style="border-top: 1px dashed #99b3ff;">

            <div class="row">
              <div class="col-6">
                <p class="mb-1 text-muted" style="font-size:0.85rem;">Departure</p>
                <p style="font-weight:600;"><i class="bi bi-calendar-event"></i> {{ flight.departure_date|date:"d/m/Y H:i" }}</p>
              </div>
              <div class="col-6">
                <p class="mb-1 text-muted" style="font-size:0.85rem;">Arrival</p>
                <p style="font-weight:600;"><i class="bi bi-calendar-check"></i> {{ flight.arrival_date|date:"d/m/Y H:i" }}</p>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6">
                <p class="mb-1 text-muted" style="font-size:0.85rem;">Price</p>
                <p style="font-weight:600; color:#28a745;">${{ flight.base_price }}</p>
              </div>
              <div class="col-6">
                <p class="mb-1 text-muted" style="font-size:0.85rem;">Plane</p>
                <p style="font-weight:600;"><i class="bi bi-airplane"></i> {{ flight.plane.model }}</p>
              </div>
            </div>

            <div class="mt-3">
              {% if request.user.is_staff %}
                <a href="{% url 'reservation_by_flight' flight.id%}" class="btn btn-primary btn-sm w-100">
                  <i class="bi bi-list-check"></i> See reservations
                </a>
              {% else %}
                <a href="{% url 'add_passenger' flight.id %}" class="btn btn-success btn-sm w-100">
                  <i class="bi bi-ticket-perforated"></i> Reserve
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12 text-center">
        <p style="color: #bb2525; font-weight: 600;">There are no flights available.</p>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
